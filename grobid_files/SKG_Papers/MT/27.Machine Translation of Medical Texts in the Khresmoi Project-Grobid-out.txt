title
Machine Translation of Medical Texts in the Khresmoi Project

abstract
This paper presents the participation of the Charles University team in the WMT 2014 Medical Translation Task. Our systems are developed within the Khresmoi project, a large integrated project aiming to deliver a multi-lingual multi-modal search and access system for biomedical information and documents. Being involved in the organization of the Medical Translation Task, our primary goal is to set up a baseline for both its subtasks (summary translation and query translation) and for all translation directions. Our systems are based on the phrasebased Moses system and standard methods for domain adaptation. The constrained/unconstrained systems differ in the training data only.

Introduction The WMT 2014 Medical Translation Task poses an interesting challenge for Machine Translation (MT). In the "standard" translation task, the end application is the translation itself. In the Medical Translation Task, the MT system is considered a part of a larger system for Cross-Lingual Information Retrieval (CLIR) and is used to solve two different problems: (i) translation of user search queries, and (ii) translation of summaries of retrieved documents. In query translation, the end user does not even necessarily see the MT output as their queries are translated and search is performed on documents in the target language. In summary translation, the sentences to be translated come from document summaries (snippets) displayed to provide information on each of the documents retrieved by the search. Therefore, translation quality may not be the most important measure in this task -the performance of the CLIR system as a whole is the final criterion. Another fundamental difference from the standard task is the nature of the translated texts. While we can consider document summaries to be ordinary texts (despite their higher information density in terms of terminology from a narrow domain), search queries in the medical domain are an extremely specific type of data, and traditional techniques for system development and domain adaptation are truly put to a test here. This work is a part of the of the large integrated EU-funded Khresmoi project. 1 Among other goals, such as joint text and image retrieval of radiodiagnostic records, Khresmoi aims to develop technology for transparent cross-lingual search of medical sources for both professionals and laypeople, with the emphasis primarily on publicly available web sources. In this paper, we describe the Khresmoi systems submitted to the WMT 2014 Medical Translation Task. We participate in both subtasks (summary translation and query translation) for all language pairs (Czech-English, German-English, and French-English) in both directions (to English and from English). Our systems are based on the Moses phrase-based translation toolkit and standard methods for domain adaptation. We submit one constrained and one unconstrained system for each subtask and translation direction. The constrained and unconstrained systems differ in training data only: The former use all allowed training data, the latter take advantage of additional webcrawled data. We first summarize previous works in MT domain adaptation in Section 2, then describe the data we used for our systems in Section 3. Sec-tion 4 contains an account of the submitted systems and their performance in translation of search queries and document summaries. Section 5 concludes the paper. 

 Related work To put our work in the context of other approaches, we first describe previous work on domain adaptation in Statistical Machine Translation (SMT), then focus specifically on SMT in the medical domain. 

 Domain adaptation of Statistical machine translation Many works on domain adaptation examine the usage of available in-domain data to directly improve in-domain performance of SMT. Some authors attempt to combine the predictions of two separate (in-domain and general-domain) translation models  (Langlais, 2002; Sanchis-Trilles and Casacuberta, 2010; Bisazza et al., 2011; Nakov, 2008)  or language models  (Koehn and Schroeder, 2007) .  Wu and Wang (2004)  use in-domain data to improve word alignment in the training phase.  Carpuat et al. (2012)  explore the possibility of using word sense disambiguation to discriminate between domains. Other approaches concentrate on the acquisition of larger in-domain corpora. Some of them exploit existing general-domain corpora by selecting data that resemble the properties of in-domain data (e.g., using cross-entropy), thus building a larger pseudo-in-domain training corpus. This technique is used to adapt language models  (Eck et al., 2004b; Moore and Lewis, 2010)  as well as translation models  (Hildebrand et al., 2005; Axelrod et al., 2011)  or their combination  (Mansour et al., 2011) . Similar approaches to domain adaptation are also applied in other tasks, e.g., automatic speech recognition  (Byrne et al., 2004) . 

 Statistical machine translation in the medical domain Eck  et al. (2004a)  employ an SMT system for the translation of dialogues between doctors and patients and show that according to automatic metrics, a dictionary extracted from the Unified Medical Language System (UMLS) Metathesaurus and its semantic type classification (U.S. National Library of Medicine, 2009) significantly improves translation quality from Spanish to English when applied to generalize the training data.  Wu et al. (2011)  analyze the quality of MT on PubMed 2 titles and whether it is sufficient for patients. The conclusions are very positive especially for languages with large training resources (English, Spanish, German) -the average fluency and content scores (based on human evaluation) are above four on a five-point scale. In automatic evaluation, their systems substantially outperform Google Translate. However, the SMT systems are specifically trained, tuned, and tested on the domain of PubMed titles, and it is not evident how they would perform on other medical texts. Costa-juss? et al. (  2012 ) are less optimistic regarding SMT quality in the medical domain. They analyze and evaluate the quality of public webbased MT systems (such as Google Translate) and conclude that in both automatic and manual evaluation (on 7 language pairs), the performance of these systems is still not good enough to be used in daily routines of medical doctors in hospitals. Jimeno  Yepes et al. (2013)  propose a method for obtaining in-domain parallel corpora from titles and abstracts of publications in the MED-LINE 3 database. The acquired corpora contain from 30,000 to 130,000 sentence pairs (depending on the language pair) and are reported to improve translation quality when used for SMT training, compared to a baseline trained on out-of-domain data. However, the authors use only one source of in-domain parallel data to adapt the translation model, and do not use any in-domain monolingual data to adapt the language model. In this work, we investigate methods combining the different kinds of data -general-domain, indomain, and pseudo-in-domain -to find the optimal approach to this problem. 

 Data description This section includes an overview of the parallel and monolingual data sources used to train our systems. Following the task specification, they are split into constrained and unconstrained sections. The constrained section includes medicaldomain data provided for this task (extracted by the provided scripts), and general-domain texts provided as constrained data for the standard task ("general domain" here is used to denote data which comes from a mixture of various different domains, mostly news, parliament proceedings, web-crawls, etc.). The unconstrained section contains automatically crawled data from medical and health websites and non-medical data from patent collections. 

 Parallel data The parallel data summary is presented in Table  1 . The main sources of the medical-domain data for all the language pairs include the EMEA corpus  (Tiedemann, 2009) , the UMLS metathesaurus of health and biomedical vocabularies and standards (U.S. National Library of Medicine, 2009), and bilingual titles of Wikipedia articles belonging to the categories identified to be medical domain. Additional medical-domain data comes from the MAREC patent collection: PatTR  (W?schle and Riezler, 2012)  available for  DE-EN and FR-EN, and COPPA (Pouliquen and Mazenc, 2011)  for FR-EN (only patents from the medical categories A61, C12N, and C12P are allowed in the constrained systems). The constrained general-domain data include three parallel corpora for all the language pairs: CommonCrawl , Europarl version 6  (Koehn, 2005) , the News Commentary corpus  (Callison-Burch et al., 2012) . Further, the constrained data include CzEng  (Bojar et al., 2012)  for CS-EN and the UN corpus for FR-EN. For our unconstrained experiments, we also employ parallel data from the non-medical patents from the PatTR and COPPA collections (other categories than A61, C12N, and C12P). 

 Monolingual data The monolingual data is summarized in Table  2 . The main sources of the medical-domain monolingual data for all languages involve Wikipedia pages, UMLS concept descriptions, and nonparallel texts extracted from the medical patents of the PatTR collections. For English, the main source is the AACT collection of texts from Clin-icalTrials.gov. Smaller resources include: Drug-Bank  (Knox et al., 2011) , GENIA  (Kim et al., 2003) , FMA  (Rosse and Mejino Jr., 2008) , GREC  (Thompson et al., 2009) , and PIL  (Bouayad-Agha et al., 2000) . In the unconstrained systems, we use additional monolingual data from web pages crawled within the Khresmoi project: a collection of about one million HON-certified 4 webpages in English released as the test collection for the CLEF 2013 eHealth Task 3 evaluation campaign, 5 additional web-crawled HON-certified pages (not publicly available), and other webcrawled medical-domain related webpages. The constrained general-domain resources include: the News corpus for CS, DE, EN, and FR collected for the purpose of the WMT 2014 Standard Task, monolingual parts of the Europarl and News-Commentary corpora, and the Gigaword for EN and FR. For the FR-EN and DE-EN unconstrained systems, the additional general domain monolingual data is taken from monolingual texts of nonmedical patents in the PatTR collection.  

 Data preprocessing The data consisting of crawled web pages, namely CLEF, HON, and non-HON, needed to be cleaned and transformed into a set of sentences. The Boilerpipe  (Kohlsch?tter et al., 2010)  and Justext  (Pomik?lek, 2011)  tools were used to remove boilerplate texts and extract just the main content from the web pages. The YALI language detection tool  (Majli?, 2012)  trained on both in-domain and general domain data then filtered out those cleaned pages which were not identified as written in one of the concerned languages. The rest of the preprocessing procedure was applied to all the datasets mentioned above, both parallel and monolingual. The data were tokenized and normalized by converting or omitting some (mostly punctuation) characters. A set of language-dependent heuristics was applied in an attempt to restore and normalize the opening/closing quotation marks, i.e. convert "quoted" to "quoted"  (Zeman, 2012) . The motivation here is twofold: First, we hope that paired quotation marks could occasionally work as brackets and better denote parallel phrases for Moses; second, if Moses learns to output directed quotation marks, the subsequent detokenization will be easier. For all systems which translate from German, decompounding is employed to reduce source-side data sparsity. We used BananaSplit for this task  (M?ller and Gurevych, 2006) . We perform all training and internal evaluation on lowercased data; we trained recasers to postprocess the final submissions.  

 Submitted systems We first describe our technique of psedo-indomain data selection in Section 4.1, then compare two methods of combining the selected data in Section 4.2. This, along with using constrained and unconstrained data sets to train the systems (see Section 3), amounts to a total of four system variants submitted for each task. A description of the system settings used is given in Section 4.3. 

 Data selection We follow an approach originally proposed for selection of monolingual sentences for language modeling  (Moore and Lewis, 2010)  and its modification applied to selection of parallel sentences  (Axelrod et al., 2011) . This technique assumes two language models for sentence scoring, one trained on (true) in-domain text and one trained on (any) general-domain text in the same language (e.g., English). For both data domains (general and medical), we score each sentence by the difference of its cross-perplexity given the in-domain language model and cross-perplexity given the general-domain language model (in this order). We only keep sentences with a negative score in our data, assuming that these are the most "medical-like". Visualisation of the domainspecificity scores (cross-perplexity difference) in the FR-EN parallel data and FR monolingual data is illustrated in Figures  1 and 2 , respectively.  6  The scores (Y axis) are presented for each sentence in increasing order from left to right (X axis). The two language models for sentence scoring are trained with a restricted vocabulary extracted from the in-domain training data as words occurring at least twice (singletons and other words are treated as out-of-vocabulary). In our experiments, we apply this technique to select both monolingual data for language models and parallel data for translation models. Selection of parallel data is based on the English side only. The in-domain models are trained on the monolingual data in the target language (constrained or unconstrained, depending on the setting). The general-domain models are trained on the WMT News data. Compared to the approach of Moore and Lewis (2010) and  Axelrod et al. (2011) , we prune the model vocabulary more aggressively -we discard not only the singletons, but also all words with non-Latin characters, which helps clean the models from noise introduced by the automatic process of data acquisition by web crawling. 

 Data combination For both parallel and monolingual data, we obtain two data sets after applying the data selection: ? "medical-like" data from the medical domain ? "medical-like" data from the general domain. For each language pair and for each system type (constrained/unconstrained), we submitted two system variants which differ in how the selected data are combined. The first variant uses a simple concatenation of the two datasets both for parallel data and for language model data. In the second variant, we train separate models for each section and use linear interpolation to combine them into a single model. For language models, we use the SRILM linear interpolation feature  (Stolcke, 2002) . We interpolate phrase tables using Tmcombine  (Sennrich, 2012) . In both cases, the held-out set for minimizing the perplexity is the system development set. 

 System details We compute word alignment on lowercase 4-character stems using fast align  (Dyer et al., 2013) . We create phrase tables using the Moses toolkit  with standard settings. We train 5-gram language models on the target-side lowercase forms using SRILM. We use MERT  (Och, 2003)  to tune model weights in our systems on the development data provided for the task. The only difference between the system variants for query and summary translation is the tuning set. In both cases, we use the respective sets provided offcially for the shared task. 

 Results Tables  3 and 4  show case-insensitive BLEU scores of our systems.  7  As expected, the unconstrained systems outperform the constrained ones. Linear interpolation outperforms data concatenation quite reliably across language pairs for summary translation. While the picture for query translation is similar, there is more variance in the results, so we cannot state that interpolation definitely works  7  As we use the same recasers for both summary and query translation, our systems are heavily penalized for wrong letter case in query translation. However, letter case is not taken into account in most CLIR systems. All BLEU scores reported in this paper will be case-insensitive for this reason. better in this case. This is due to the sizes of the development and test sets and most importantly due to sentence lengths -queries are very short, making BLEU unreliable, MERT unstable, and bootstrap resampling intervals wide. If we compare our score to the other competitors, we are clearly worse than the best systems for summary translation. From this perspective, our data filtering seems overly eager (i.e., discarding all sentence pairs with a positive perplexity difference). An experiment which we leave for future work is doing one more round of interpolation to combine a model trained on the data with negative perplexity with models trained on the remainder. 

 Conclusions We described the Charles University MT system used in the Shared Medical Translation Task of WMT 2014. Our primary goal was to set up a baseline for both the subtasks and all translation directions. The systems are based on the Moses toolkit, pseudo-in-domain data selection based on perplexity difference and two different methods of in-domain and out-of-domain data combination: simple data concatenation and linear model interpolation. We report results of constrained and unconstrained systems which differ in the training data only. In most experiments, using additional data improved the results compared to the constrained systems and using linear model interpolation outperformed data concatenation. While our systems are on par with best results for case-insensitive BLEU score in query translation, our overly eager data selection techniques caused lower scores in summary translation. In future work, we plan to include a special out-of-domain model in our setup to compensate for this problem. Figure 1 : 1 Figure 1: Distribution of the domain-specificity scores in the English-French parallel data sets. 

 Figure 2 : 2 Figure 2: Distribution of the domain-specificity scores in the French monolingual data sets. 

 Table 1 : 1 Number of sentence pairs and tokens (source/target) in parallel training data (in thousands). Czech-English German-English French-English dom set pairs source target pairs source target pairs source target med con 2,498 18,126 19,964 4,998 123,686 130,598 6,139 202,245 171,928 gen con 15,788 226,711 260,505 4,520 112,818 119,404 40,842 1,470,016 1,211,516 gen unc - - -9,320 525,782 574,373 13,809 961,991 808,222 dom set English Czech German French med con 172,991 1,848 63,499 63,022 gen con 6,132,107 627,493 1,728,065 1,837,457 med unc 3,275,272 36,348 361,881 908,911 gen unc 618,084 - 339,595 204,025 

 Table 2 : 2 Number of tokens in monolingual training data (in thousands). 

 Table 3 : 3 64?1.14 32.84?1.24 18.10?0.94 18.29?0.92 33.39?1.11 36.71?1.17  con interpol 32.94?1.11 32.31?1.20 18.96?0.93 18.41?0.93  34.06?1.11 37.42?1.21 unc concat 34.10?1.11 34.52?1.20 21.12?1.03 19.76?0.92 36.23?1.03 38.15?1.16 unc interpol 34.48?1.16 34.92?1.17 22.15?1.06 20.81?0.95 36.26?1.13 37.91?1.13 BLEU scores of summary translations. 88?5.04 31.24?5.59 22.61?4.91 19.13?5.66 33.08?3.80 36.73?4.88 unc interpol 33.82?5.16 34.19?5.27 23.93?5.16 15.87?11.31 31.19?3.73 40.25?5.14 cs?en de?en en?cs en?de en?fr fr?en con concat 33.cs?en de?en en?cs en?de en?fr fr?en con concat 30.87?4.70 33.21?5.03 23.25?4.85 17.72?4.75 28.64?3.77 35.56?4.94 con interpol 32.46?5.05 33.74?4.97 21.56?4.80 16.90?4.39 29.34?3.73 35.28?5.26 unc concat 34. 

 Table 4 : 4 BLEU scores of query translations. 

			 http://www.khresmoi.eu/ 

			 http://www.ncbi.nlm.nih.gov/pubmed/ 3 http://www.nlm.nih.gov/pubs/ factsheets/medline.html 

			 https://www.hon.ch/ 5 https://sites.google.com/site/ shareclefehealth/ 

			 For the medical domain, constrained and unconstrained parallel data are identical.
