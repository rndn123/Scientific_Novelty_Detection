title
Sentiment Flow -A General Model of Web Review Argumentation

abstract
Web reviews have been intensively studied in argumentation-related tasks such as sentiment analysis. However, due to their focus on content-based features, many sentiment analysis approaches are effective only for reviews from those domains they have been specifically modeled for. This paper puts its focus on domain independence and asks whether a general model can be found for how people argue in web reviews. Our hypothesis is that people express their global sentiment on a topic with similar sequences of local sentiment independent of the domain. We model such sentiment flow robustly under uncertainty through abstraction. To test our hypothesis, we predict global sentiment based on sentiment flow. In systematic experiments, we improve over the domain independence of strong baselines. Our findings suggest that sentiment flow qualifies as a general model of web review argumentation.

Introduction The web is full of user-generated reviews on products, services, and works of art, like those from Amazon, TripAdvisor, and Rotten Tomatoes. Such web reviews provide facts, positive opinions, and negative opinions on different aspects. By that, the reviews express, implicitly or explicitly, an overall opinion on the topic in question. From an abstract viewpoint, the argumentation of a web review can thus be seen as a composition of local sentiments used to justify some global sentiment. Both local and global sentiment of reviews are in the focus of numerous sentiment analysis approaches (cf. Section 2 for details). Many of these approaches model reviews primarily with contentbased features, derived from the words in the reviews. The use of words, however, varies strongly across domains, as illustrated in Figure  1  for a product, a hotel, and a movie review. As a consequence, sentiment analysis suffers from domain dependence  (Wu et al., 2010) , i.e., high effectiveness is often achieved only in the domain an approach has been specifically modeled for. To adapt to other domains, prior knowledge about these domains or about domain-independent features is needed  (Prettenhofer and Stein, 2010) . This paper considers the question as to whether the overall argumentation of web reviews can be modeled in a general way in order to increase domain independence in sentiment analysis. We observe that people structure web reviews largely sequentially-in contrast to the complex structures of many other argumentative texts. While the reviewed aspects differ between domains, our assumption is that the overall argumentation of a web review is generally represented by a sequence of local sentiments, called the review's sentiment flow  (Mao and Lebanon, 2007) . In particular, we hypothesize that, under an adequate model, similar sentiment flows express similar global sentiments, also across domains. All reviews in Figure  1 , for instance, express neutral global sentiment starting with positive, continuing with negative, and ending with positive local sentiment. Unlike in our previous approach  (Wachsmuth et al., 2014a) , we analyze the major abstraction steps when modeling sentiment flow to represent global sentiment. A general model should abstract from both content and other domain differences, such as a review's length or the density of local sentiment in it. Based on web review corpora with known sentiment flows, we empirically analyze several model variants across three domains. Our results offer clear evidence for the truth of our hypothesis, indicating the generality of sentiment flow as a model of web review argumentation. The abstract nature of sentiment flow, however, does not directly achieve domain independence, as  the recognition of local sentiment in unknown reviews may still be domain-dependent. We therefore also present a novel edit distance approach to robustly compare flows, when local sentiment is obtained using state-of-the-art techniques  (Socher et al., 2013) . In systematic cross-domain experiments with the given corpora, we classify global sentiment based on sentiment flow without any domain adaptation. While not being perfectly effective, our approach improves over the domain robustness of strong baselines. Altogether, the paper's main contributions are: 1. Evidence that sentiment flow qualifies as a general model of the overall argumentation of web reviews across domains. 2. A domain-robust approach for the classification of the global sentiment of web reviews. 

 Related Work As surveyed by  Pang and Lee (2008)  and by  Liu (2012) , numerous sentiment analysis approaches have been proposed for different text types, levels of granularity, sentiment scales, and domains. We target at global text-level sentiment of web reviews. While we distinguish three sentiment classes here, our approach can be adapted to other scales. Our goal is not to optimize sentiment analysis in a specific domain, but to find a model that supports sentiment analysis across domains. As common in text classification  (Manning et al., 2008) , sentiment analysis often relies on words and other content features, which tends to be prone to domain dependence  (Wu et al., 2010) . Existing domain adaptation techniques for sentiment analysis require a few training texts from each target domain or a few domain-independent pivot features to align domain-specific features  (Prettenhofer and Stein, 2010) . Our model complements these techniques and could be leveraged for pivot features. In tasks like authorship attribution and argumentative zoning, non-topical words benefit domain independence  (Menon and Choi, 2011; ? S?aghdha and Teufel, 2014) . Instead, we focus on the local sentiment on different aspects in a review here. Aspect-based sentiment analysis extracts finegrained opinions from a review  (Popescu and Etzioni, 2005) . These aspects in turn impact the review's global sentiment  (Wang et al., 2010) . However, relevant aspects naturally tend to be domainspecific, like the picture quality of HDD players or the beds of hotels (cf. Figure  1 ). While weaklysupervised approaches to extract aspects and local sentiment exist  (Brody and Elhadad, 2010; Lazaridou et al., 2013) , it is not clear how to align aspects from different domains. We ignore aspects here, only preserving the local sentiment itself. State-of-the-art approaches for classifying local sentiment within a domain model the composition of words, e.g., relying on deep learning  (Socher et al., 2013) . We do not compete with such an approach, but we use it to then predict global sentiment.  T?ckstr?m and McDonald (2011)  observe that local and global sentiment correlate, aiming for the opposite direction, though. In  (Wachsmuth et al., 2014b) , we already compute frequent flows of local sentiment, but we neither analyze their generality, nor do we use them for prediction. The idea of modeling sentiment flow was introduced by  Mao and Lebanon (2007)  who classify local sentiment based on neighboring local sentiment in a review. When inferring global sentiment from a flow, however, the authors model only single flow positions, not their ordering. In contrast, we capture the overall structure of reviews in  (Wachsmuth et al., 2014a)  by measuring the similarity of a given flow to known sentiment flow patterns. We point out the domain robustness of sentiment flow there, but we still use domain-specific local sentiment classifiers and we do not handle some major domain differences of web reviews. Both limitations are addressed in this paper, where we align flows similar to how  Persing et al. (2010)  align essay organizations. We claim that sentiment flow models a review's argumentation, such that local sentiments ressemble rhetorical moves. Comparable simplifications are common for scientific argumentation  (Teufel, 2014) . Usually, argumentative texts are studied more deeply, considering different types of argument components and their relations  (Mochales and Moens, 2011) . Mining such structure is getting increasing attention recently  (Habernal et al., 2014) , also in the analysis of reviews  (Villalba and Saint-Dizier, 2012) . To express global sentiment, however, web reviews argue in simpler ways. 

 Web Review Argumentation Argumentation refers to the exchange of opinions, to defending positions, and to convincing others of certain stances  (van Eemeren et al., 2014) . A review is a written form of monological argumentation, where an author structures a selection of arguments in order to justify his or her conclusion on a topic of discussion  (Besnard and Hunter, 2008) . Reviews, in particular, discuss products, services, works of art, or similar. The arguments in a review correspond to objective facts, positive and negative opinions, and mixtures of these on the topic as a whole or on specific aspects of the topic. In this paper, we are interested in the overall argumentation of reviews. Our assumption is that the conclusion of a review's overall argumentation consists in its global sentiment. Global sentiment is often explicitly reflected by an assigned overall rating, at least for web reviews. Many web reviews are written by people in an ad-hoc fashion to quickly share opinions. As a result, unlike other argumentative texts, web reviews often remain with a sequential structure  (Villalba and Saint-Dizier, 2012)  and miss explicit relations between the shared opinions. E.g., while the product review and the hotel review in Figure  1  cover opinions on several aspects, no deliberate structure is found in their argumentation. However, the ex-cerpt of the more professional movie review shows that this is not always the case. 

 Domain Differences In Figure  1 , we categorize domains by source and topical theme (e.g., Amazon products). Other granularities would be possible (e.g., consumer electronics) or other categorization schemes (e.g., user vs. pro reviews). That being said, we speak of domains only to roughly distinguish web reviews that vary in how they argue for a conclusion. 1 We observe major differences in three broad respects: Content Especially topical web review domains differ widely regarding the terms and phrases that play a role in their argumentation. This includes the aspects being discussed (e.g., "beds" of hotels vs. the "subject" of movies) as well as the words used to express sentiment and their explicitness (e.g., "yummy" vs. "an unusual movie"). Form As sketched above, further differences refer to the structure and style of web reviews. Some are rather subtle, like a careful use of paragraph breaks, whereas others are obvious, like a review's length. The movie review in Figure  1 , for instance, is actually over twice as long as the shown excerpt, starting with an objective synopsis of the plot and including "sub-reviews" of different aspects. 2 Subjectivity Finally, the use of subjectivity varies across web review domains: First, the density of sentiment tends to be high in some cases, like hotel reviews (cf. Figure  1 ), but low in others, like movie reviews, where objective plot descriptions and subjective opinions often alternate (the shortened excerpt in Figure  1  hides this to some extent). Second, sentiment is sometimes very intense (as in the product review in Figure  1 ), sometimes subtle. And third, in some domains even single sentences often contain mixed sentiment, whereas in others opinions tend to be laid out across sentences. We will empirically underpin most observations in Section 5, where we analyze the domain independence of the model described next. 

 Sentiment Flow as a General Model In the following, we introduce our model of web review argumentation. We discuss how to abstract for generality and how to deal with uncertainty. 

 Web review 

 Local sentiment Sentiment flow 

 Overall argumentation Global sentiment represents comprises represents We   

 Modeling a Review by its Sentiment Flow We propose a fairly simple argumentation model based on the observation that many web reviews are organized sequentially (cf. Section 3). As we assume that the overall argumentation of a web review represents global sentiment in the first place, we fully abstract from the content of the facts and opinions that serve as arguments. In particular, we model the argumentation of a web review solely by its sentiment flow, i.e., the sequence of local sentiments comprised in the review's text. We do not presume the granularity of local sentiment, but we propose to distinguish positive, neutral, and negative local sentiment, which is the common ground of related works (cf. Section 2). Figure  2  illustrates how we model web review argumentation. Our hypothesis is that similar sentiment flows are used across domains of web reviews to express the same global sentiment. However, because of the domain differences described in Section 3, we do not expect that the original sentiment flows of web reviews generalize well. 

 Abstracting Flows for Generality By concept, sentiment flow avoids to capture content and some facets of form like paragraph usage. To abstract from the length of reviews,  Mao and Lebanon (2007)  and our approach in  (Wachsmuth et al., 2014a)  length-normalize sentiment flow via interpolation. While this may preserve all information, it does not account for sub-reviews and the density of subjectivity. Here, we investigate more informed ways of abstracting flows. In particular, we consider three transformations of flows: Change Deletion of repeating local sentiments. The rationale is to reduce subjectivity differences by focusing on changes of local sentiment. NoLoops Deletion of repeating sequences of two or more local sentiments. The rationale is to reduce length differences by merging similar sub-reviews. 2Class Deletion of neutral local sentiments. The rationale is to reduce length and subjectivity differences emanating from objective descriptions. Figure  3  exemplifies the three transformations. They are not commutative, as can partly be seen for the example. In Section 5, we test what combinations of transformations lead to an adequate sentiment flow model. While more transformations will benefit generality, the lost specificity may decrease the correlation with global sentiment. 

 Analyzing Flows under Uncertainty Given an adequate sentiment flow model, we seek to find out to what extent it enables domain-robust sentiment analysis. This brings up two challenges related to uncertainty: (1) The classification of local sentiment in unknown reviews will not be free of errors, and, (2) reviews may comprise flows for which the global sentiment is unknown. Classification errors are naturally problematic for modeling sentiment flow. At least, some errors are bypassed by the three transformations. E.g., if one negative local sentiment in the original flow in Figure  3  is misclassified as positive, the Change transformation fixes this. If it is classified as neutral, Change and 2Class together eliminate the effect. Moreover, errors can be countered by limiting the impact of single positions in a flow. In  (Wachsmuth et al., 2014a) , we learn to infer global sentiment from the Manhattan distances between a sentiment flow and a set of common flows, thereby analyzing the flow as a whole. The common flows are found in a preceding clustering step. While we adopt the learning approach here, the Manhattan distances imply that flows are similar only if their changes are at similar positions. Instead, we compare sentiment flows (modified with zero to three transformations) based on their normalized minimum edit distance  (Cormen et al., 2009) . Analog to  Persing et al. (2010) , we incrementally compute the edit distance using sequence alignment. To this end, we specify costs for pos-Sentiment flow 1 (length 4) sible edit operations, i.e., substitutions, insertions, and deletions of single local sentiments. We map positive local sentiment to the value 1.0, neutral to 0.5, and negative to 0.0. The cost is then provided by a function d for any two values s and s : 1/3 1/3 1/3 0 1/3 1 1 1 1 1 1 1 1/3 0 1 1 1 1/3 1 1 1/3 1/3 1 0 1 1 1 1 1 1 1 1/3 1/3 1/3 1/3 1 1 0 0 1 1 0 1 Sentiment flow 2 (length 3) d(s, s ) = |s ? s | If s substitutes s. ? + (1?) ? |s?s | If s is inserted or deleted after s. ? ? [0, 1] specifies some fixed cost (we set ? to 1/3 in Section 6). The intuition behind d is to have a higher cost the more s and s differ. Still, insertions and deletions are never free, as they affect differences that remain after applying transformations to abstract from irrelevant differences. Figure  4  illustrates the alignment of two flows as a shortest-path search. We normalize the flows' minimum edit distance by their maximum length. Before we evaluate if the edit distance captures flow similarity more robustly than the Manhattan distance, we analyze what representation of sentiment flows proves most general. This will also reveal that the proposed abstractions reduce the need to perform clustering for finding common flows. 

 Analysis of the Generality of the Model We now report on experiments on corpora from three domains that empirically analyze to what extent different sentiment flow variants qualify as general models of web review argumentation. 3 

 Ground-Truth Data with Sentiment Flow We process three existing corpora with local sentiment annotations of complete texts. While the first two are available online, we obtained the last from the authors. Each corpus comprises English web reviews from one broad topical domain. For all locations, the reviews are evenly distributed over the five TripAdvisor overall scores. In accordance with the product corpus, we see score 4-5 as positive global sentiment, 3 as neutral, and 1-2 as negative. In each review, all main clauses together with their subordinate clauses have been classified as being positive, negative, or neutral. Movie Domain Finally, the third corpus  (Mao and Lebanon, 2007)  compiles 450 Rotten Tomatoes reviews from the Cornell Movie Review Data scale dataset v1.0  (Pang and Lee, 2005 ) that refer to two authors. We use the 201 reviews of Scott Renshaw for training and the 249 of Dennis Schwartz for testing. The reviews lack punctuation, capitalization, and their overall ratings. We recovered the overall ratings from the original dataset based on the rating scale 0-2, resulting in 178 positive, 139 neutral, and 133 negative reviews. In each review,  Mao and Lebanon (2007)  classified all sentences to be very positive, positive, neutral, negative, or very negative, which we reduce to three classes. 

 Experimental Set-up To find the most general model of web review argumentation across domains, we compare 16 sentiment flow variants using three measures: Model Variants The original sentiment flow of all corpus reviews can be directly derived from the ground-truth data. In each model variant, the flow is modified by a combination of zero to three of the transformations from Section 4. All variants are named according to the applied transformations. Measures In  (Wachsmuth et al., 2014b) , we propose specific notions of the recall and precision of a sentiment flow f in a given collection of reviews: The recall R f denotes the relative frequency of reviews with flow f , while the precision P f (s) with respect to some global sentiment s denotes the relative co-occurrence of f with s. Here, we extend these measures for complete models as follows. We define the aggregate recall of a model on a collection of reviews as the sum of the recall of the set F of all its known sentiment flows: Aggregate Recall(F ) = f ?F R f With weighted precision, we denote the sum of the maximum precision of each such flow in F , weighted with the recall of the flow: Weighted Precision(F ) = f ?F max s {P f (s)} ? R f In addition, we assess how much two domains differ under a given model variant. To this end, we measure the Hellinger distance H f (in the range [0, 1]) between the global sentiment distributions of each flow f known for both domains: 6.6 83.1 % 14.1 % 2.8 % Movie -----Product (neutral, negative) 2. 9.1 6.5 % 24.9 % 68.6 % Hotel 5. 3.5 0.0 % 10.5 % 89.5 % Movie 1. 7.6 8.6 % 0.0 % 91.4 % Table  3 . The most common flow in the training set of each evaluated domain for three of the 16 evaluated model variants. For each flow, the recall rank, the recall, and the distribution over the three global sentiments within each domain are given. H f (p 1 , p 2 ) = 1 ? 2 ? s ( p 1 (s) ? p 2 (s)) 2 Here, p 1 and p 2 denote the global sentiment distributions of f . For weighted Hellinger distances, we multiply the distance of each flow in F with the sum of its recall in both domains.  4  Experiments Given all 16 possible model variants for all reviews, we analyze the generality of each variant for every combination of domains. I.e., we first determine the known sentiment flows on the training set of one domain. Then, we compute the aggregate recall, weighted precision, and weighted Hellinger distance once for the in-domain test set and once for both full out-of-domain corpora. 5 

 Results on the Generality across Domains Table  2  contains the number of known flows and the experiment results for each domain combination. Model variants whose benefit seems limited are not marked in bold: The bottom six have a low aggregate recall in all domains, suggesting that they do not generalize well. Most significantly, the original flows from the movie training set are not found in any test domain. The top five achieve almost total recall, but much less precision than the others, indicating that they abstract too much. Among the five robust model variants (marked in bold), change-2class-noloops has the highest aggregate recall throughout, ranging from 73.0 to 92.9. Consistently, global sentiment is represented best by change-noloops in the product domain and by 2class-noloops in the other domains (with up to 85.1 weighted precision). Also, 2class-noloops is third-best in terms of recall. While no clear "winner" exists, this variant seems most promising for modeling web review argumentation. The weighted Hellinger distances show that the domain differences of many variants are small. On average, change-2class has the most stable global sentiment distribution. Most distances are only slightly higher out-of-domain than in-domain or even lower. Hence, sentiment flows hardly vary stronger across domains than within a domain. 

 The Most Common Sentiment Flows To investigate what sentiment flows actually occur in web reviews, we determined the flow with highest recall for the training set of each corpus. For comparability, we balanced the flows in the training set before by weighting their occurrences according to the distribution of global sentiment.  6  Table  3  shows the recall and the sentiment distribution of each such flow in all evaluated domains exemplarily for three of the model variants discussed above. While high-recall flows naturally tend to be simple, we also observe more complex flows, such as (negative, negative, positive, negative) in case of change-2class-noloops. Except for the change-noloops flow (positive), which does not occur at all in the movie training set, all shown flows are common across domains, achieving a recall of over 2% in most cases. For 2class-noloops, only two flows are listed, because (negative, negative) is the most common flow in both the product and the movie domain. Regarding the distribution of global sentiments, nearly all flows behave similar across domains. The only exception is (positive, negative, positive) in change-2class-noloops, which never turns out negative in product reviews but never positive in movie reviews. Altogether, we conclude that sentiment flow is not a fully precise model of web review argumentation, but it proves general with respect to global sentiment. What remains to be checked is the benefit of modeling sentiment flow under uncertainty. 

 Analysis of the Robustness of the Model Finally, we evaluate how effectively and domainrobustly sentiment flow predicts global sentiment, when local sentiment is not given but classified. To analyze the domain independence of our model, no knowledge about target domains is used. 

 Sentiment Analysis Approaches To classify sentiment flows, we build on the edit distance approach presented in Section 4: Model Variants As in Section 5, we look at all 16 possible variants of the proposed model. For each variant, we determine all sentiment flows that represent at least 1% of all reviews in a given training set. We learn a mapping from the edit distance between a review's sentiment flow and each of these flows to global sentiment. For robustness, we also combine different model variants. We compare the accuracy of the model variants to previous approaches evaluated on the given corpora. In addition, we analyze domain robustness based on three baselines, which relate to the three abstraction levels in Figure  2  (cf. Section 4): Bag-of-Words (b1) The frequencies of all tokens that occur in at least 5% of all training reviews. Local Sentiment (b2) The frequencies of positive, neutral, and negative local sentiment in a review as well as the first and last local sentiment (analog to Section 4, local sentiment is mapped to [0, 1]). Sentiment Flow Patterns (b3) The Manhattan distances to those sentiment flows obtained by our clustering approach  (Wachsmuth et al., 2014a) . All approaches are used as feature types in machine learning (with values normalized to [0, 1]). 

 Experimental Set-up We tackle three-class sentiment analysis, which is supposed to be particularly hard due to the fuzzy nature of neutral sentiment  (T?ckstr?m and Mc-Donald, 2011) . Given the three review corpora described in Section 5, we proceed as follows: 7 Local Sentiment For feature computations, we split all reviews into tokens and sentences. Then, we classify local sentiment with the algorithm of  Socher et al. (2013)  from Stanford CoreNLP.  8  The algorithm was trained on subjective movie review sentences. We found that its accuracy is limited to around 50% on the given corpora, partly as it tends to misclassify objective sentences. Still, we use it to avoid any adaptation to the domains at hand. 

 Global Sentiment To determine global sentiment, we perform supervised learning based on the feature types outlined above. In particular, we use the default configuration of the random forest classifier from Weka  (Breiman, 2001; Hall et al., 2009)  without any parameter optimization. Experiments Having classified local sentiment in all reviews, we learn a random forest classifier on each feature type and different feature sets for all combinations of training and test domain. To prevent class bias, the training sets are balanced with duplicate oversampling. Since the size of the corpora is limited, we evaluate in-domain accuracy on the whole corpora using 10-fold cross-validation, averaged over five runs. Afterwards, we test the out-of-domain accuracy by applying the learned classifier to the other complete corpora. 

 Results on the Domain Robustness Table  4  lists accuracy results for all domain combinations. In the movie domain, we obtain an overall accuracy of 71.8. On average, we thus succeed over  Pang and Lee (2005)   2015) in the hotel domain. In the product domain, our approach fails to compete with  T?ckstr?m and McDonald (2011)  who classify the global sentiment of 66.6% of all reviews correctly after training on large-scale product corpora. The small size of the given corpus explains the limited in-domain accuracy in Table  4 ; even some out-of-domain classifiers perform better on the product reviews. Still, the value 54.2 significantly improves over all baselines under a paired t-test (p < 5%). As expected, bag-of-words (b1) proves strong in some in-domain tasks-achieving even the best overall accuracy in the hotel domain (79.6)-but it consistently fails out-of-domain. Although less clear, similar observations can be made for b2. This shows that a restriction to the distribution of local sentiment is insufficient to tackle domain dependence. The sentiment flow patterns are comparably effective out-of-domain, but still suffer from the domain change on the evaluated corpora. For space reasons, we compare the baselines b1 to b3 only to a selection of five of the most effective model variants, v1 to v5. Alone, these variants only occasionally do better than the sentiment flow patterns (b3). However, their combination (v1-5) clearly outperforms b3 in 4 out of 6 out-of-domain experiments. A strong variant is 2class-noloops, which already proved general in the results from Section 5. In contrast, 2class (v4) appears controversial. While it turns out being both effective and domain-robust when training in the product and hotel domain, no 2class sentiment flow represents at least 1% of the movie corpus, emphasizing that more abstraction is required for robustness. Altogether, the bottom lines of each domain in Table  4  provide clear evidence that our approach improves domain robustness in sentiment analysis: In all cases, the out-of-domain accuracy is best when using our sentiment flow features v1-5. At the same time, our results suggest that very high effectiveness might require more adaptation to the target domain. In this regard, modeling sentiment flow serves as a promising basis to align more effective but domain-dependent features. 

 Conclusion This paper puts the goal of domain independence in the sentiment analysis of web reviews into the focus. In particular, we hypothesize that an abstract model of the local sentiment flow in a review generally captures the review's overall argumentation regarding global sentiment. In ground-truth data from three domains, we have found clear evidence for our hypothesis, indicating that people write reviews in similar ways across domains. On this basis, we have presented a novel learning approach, which predicts the global sentiment of a review from the edit distance between the review's sentiment flow and a set of common flows. While we determined common flows with clustering in previous work  (Wachsmuth et al., 2014a) , instead here we rely on different flow abstractions at the same time. Systematic experiments emphasize that, in this manner, our approach achieves domain robustness without any domain adaptation even when the accuracy of the local sentiment in the flows is limited. However, our experiments also show that sentiment flow alone does not always suffice to predict global sentiment. In future sentiment analysis approaches, sentiment flows may therefore rather serve as pivot features for domain adaptation. Figure 1 . 1 Figure 1. Example web reviews with neutral global sentiment from three domains, taken from the corpora described in Section 5. Corpus annotations of positive and negative local sentiment are marked in light green and medium red, respectively. 
